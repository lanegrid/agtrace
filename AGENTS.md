- Keep minimal comments and documents.
- Write comments in English.
- Read `docs`.
- When you make a commit, the commit message must be oneline not multiline.
- Rather than rushing to complete tasks, please focus on a quality-driven approach: reviewing implementations, running lint and fmt checks, and committing with concise, one-line messages (messages like "Claude's co-author" are unnecessaryâ€”keep them one-line).
- Rules for snapshot tests: After running `cargo insta accept`, use `git diff` to check the differences. If there are issues, fix the implementation. If there are no issues, include it in the same commit as the implementation.
- Use `tree2md` command for full file tree.
- Design principle: Always choose the complete, unified solution over partial fixes. Never offer half-measures like "delete unused code" or "suppress warnings" without fixing the root cause. When facing implementation choices, default to the option that improves consistency and type safety across the codebase.
- Leave a TODO when you are consciously deferring a specific, necessary action due to immediate constraints like scope or dependencies.
- When investigating actual event/tool structures: Run `cargo build --release && ./target/release/agtrace lab grep "pattern" --json --limit 5` to see real data instead of reading raw files. `./target/release/agtrace lab grep -h` helps to learn how to use it.
