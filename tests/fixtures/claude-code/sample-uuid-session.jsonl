{"type":"file-history-snapshot","messageId":"msg-001","snapshot":{"messageId":"msg-001","trackedFileBackups":{},"timestamp":"2025-11-20T10:00:00.000Z"},"isSnapshotUpdate":false}
{"parentUuid":null,"isSidechain":false,"userType":"external","cwd":"/Users/testuser/projects/myapp","sessionId":"abcd1234-5678-90ef-ghij-klmnopqrstuv","version":"2.0.28","gitBranch":"main","type":"user","message":{"role":"user","content":"Help me refactor this code"},"uuid":"uuid-001","timestamp":"2025-11-20T10:00:01.000Z"}
{"parentUuid":"uuid-001","isSidechain":false,"userType":"external","cwd":"/Users/testuser/projects/myapp","sessionId":"abcd1234-5678-90ef-ghij-klmnopqrstuv","version":"2.0.28","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_001","type":"message","role":"assistant","content":[{"type":"thinking","thinking":"I need to first read the code to understand what needs to be refactored."}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":150,"cache_creation_input_tokens":5000,"cache_read_input_tokens":0,"cache_creation":{"ephemeral_5m_input_tokens":5000,"ephemeral_1h_input_tokens":0},"output_tokens":25,"service_tier":"standard"}},"requestId":"req_001","type":"assistant","uuid":"uuid-002","timestamp":"2025-11-20T10:00:03.000Z"}
{"parentUuid":"uuid-002","isSidechain":false,"userType":"external","cwd":"/Users/testuser/projects/myapp","sessionId":"abcd1234-5678-90ef-ghij-klmnopqrstuv","version":"2.0.28","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_001","type":"message","role":"assistant","content":[{"type":"text","text":"I'll help you refactor the code. Let me start by reading the main file."}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":150,"cache_creation_input_tokens":5000,"cache_read_input_tokens":0,"cache_creation":{"ephemeral_5m_input_tokens":5000,"ephemeral_1h_input_tokens":0},"output_tokens":25,"service_tier":"standard"}},"requestId":"req_001","type":"assistant","uuid":"uuid-003","timestamp":"2025-11-20T10:00:03.500Z"}
{"parentUuid":"uuid-003","isSidechain":false,"userType":"external","cwd":"/Users/testuser/projects/myapp","sessionId":"abcd1234-5678-90ef-ghij-klmnopqrstuv","version":"2.0.28","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_001","type":"message","role":"assistant","content":[{"type":"tool_use","id":"toolu_001","name":"Read","input":{"file_path":"/Users/testuser/projects/myapp/src/main.rs"}}],"stop_reason":null,"stop_sequence":null,"usage":{"input_tokens":150,"cache_creation_input_tokens":5000,"cache_read_input_tokens":0,"cache_creation":{"ephemeral_5m_input_tokens":5000,"ephemeral_1h_input_tokens":0},"output_tokens":50,"service_tier":"standard"}},"requestId":"req_001","type":"assistant","uuid":"uuid-004","timestamp":"2025-11-20T10:00:04.000Z"}
{"parentUuid":"uuid-004","isSidechain":false,"userType":"external","cwd":"/Users/testuser/projects/myapp","sessionId":"abcd1234-5678-90ef-ghij-klmnopqrstuv","version":"2.0.28","gitBranch":"main","type":"user","message":{"role":"user","content":[{"type":"tool_result","content":"fn main() {\n    println!(\"Hello, world!\");\n}\n","is_error":false,"tool_use_id":"toolu_001"}]},"uuid":"uuid-005","timestamp":"2025-11-20T10:00:04.200Z","toolUseResult":"fn main() {\n    println!(\"Hello, world!\");\n}\n"}
{"parentUuid":"uuid-005","isSidechain":false,"userType":"external","cwd":"/Users/testuser/projects/myapp","sessionId":"abcd1234-5678-90ef-ghij-klmnopqrstuv","version":"2.0.28","gitBranch":"main","message":{"model":"claude-sonnet-4-5-20250929","id":"msg_002","type":"message","role":"assistant","content":[{"type":"text","text":"I see the code. Let me suggest some improvements and refactor it."}],"stop_reason":"end_turn","stop_sequence":null,"usage":{"input_tokens":200,"cache_creation_input_tokens":0,"cache_read_input_tokens":5000,"cache_creation":{"ephemeral_5m_input_tokens":0,"ephemeral_1h_input_tokens":0},"output_tokens":30,"service_tier":"standard"}},"requestId":"req_002","type":"assistant","uuid":"uuid-006","timestamp":"2025-11-20T10:00:05.000Z"}
{"type":"summary","sessionId":"abcd1234-5678-90ef-ghij-klmnopqrstuv","text":"Helped refactor Rust code with better structure","timestamp":"2025-11-20T10:00:06.000Z"}
